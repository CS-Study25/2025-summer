# IP 주소 체계
## 0. IP 주소
    네트워크 상의 장치를 구분하기 위한 고유 주소이다. 
    인터넷 상에서 누구한테 데이터를 보내야하는지 를 지정하는 주소이다.
#### IP 주소 구성
    IP 주소 = 네트워크 주소 + 호스트 주소
- 네트워크 주소: 이 장치가 속한 네트워크 구간을 나타냄 (속하는 집단)
- 호스트 주소: 해당 네트워크 안에서의 개별 장치의 고유 위치

ex) 192.168.1.10 ->  192.168.1.10이라는 IP는
192.168.1.0이라는 네트워크에 속한 10번 컴퓨터

ex) 10.0.0.25 -> 10.0.0.25는 10.0.0.0 네트워크의 25번 장치

        라우터는 네트워크 주소만 본다. 호스트 주소는 필요x 
        -> 라우터의 역할은 어느 네트워크로 보낼지를 결정하는 것이기 때문
        -> 네트워크 안에서 누구에게 보낼지에는 관심 없음
## 1. IPv4 (전통적인 IP)
    32비트를 8비트 단위로 점을 찍어 표기한다. 
    - 주소 부족 문제가 발생했음(IP 고갈 현상)
    - 네트워크 설정을 사람이 수동으로 해야함.
## 1-2. 클래스 기반 할당 방식
    IP 주소를 다섯 개의 클래스(A, B, C, D, E)로 구분하여 할당하는 방식
- 초창기 인터넷에서 간단하게 주소를 나누고 관리하기 위해 도입된 제도이다. 

- 앞쪽 비트의 종류에 따라 클래스를 구분한다. 
#### 클래스 A
    맨 왼쪽 비트가 0이다. 
#### 클래스 B
    맨 왼쪽 비트가 10이다.
#### 클래스 C
    맨 왼쪽 비트가 110이다. 

### 일대일 통신: 클래스 A, B, C
    하나의 송신자가 하나의 수신자에게만 데이터 전송하는 방식 
- 즉 IP 주소가 단일 장치 하나만을 가리킨다. 
### 멀티캐스트 통신: 클래스 D
    한 송신자가 다수의 수신자에게 동시에 데이터를 전송하는 방식
- 브로드 캐스트처럼 전체가 대상이 아니고, 특정 그룹만 대상이다. 
- 주의) ARP와 IP는 다른 프로토콜임, 그니까 브로드 캐스트(프로토콜:ARP)랑  멀티태스크 통신(프로토콜: IP)는 완전 다른 영역
### 예비용 통신: 클래스 E
    미래 확장, 실험, 연구용 예약된 IP 대역
- 현재는 일반 인터넷 통신에 사용 불가
### 네트워크 주소와 브로드캐스트 주소
- 네트워크의 첫 번째 주소는 네트워크 주소로 사용되고 가장 마지막 주소는 브로드캐스트용 주소로 네트워크에 속해 있는 모든 컴퓨터에 데이터를 보낼 때 상용된다. 
- 하나의 IP 네트워크 범위(서브넷) 안에서 
    - 첫 번째 주소는 IP 자체를 나타내는 주소이다. 
    - 마지막 주소는 브로드캐스트 주소이다. (이 네트워크에 있는 모든 장치에게 데이터를 보낼 때 사용되는 주소)

#### ex) 192.168.1.0
    이 IP 대역은 192.168.1.0 ~ 192.168.1.255까지 존재한다. (총 256개)
- 네트워크 주소: 192.168.1.0 
    - IP 대역 자체를 지칭 (장치에 할당 불가능함)
- 호스트 주소: 192.168.1.1 ~ 192.168.1.254
    - 실제 컴퓨터, 프린터, 라우터 등 장치들이 쓰는 주소
- 브로드캐스트 주소: 192.168.1.255
    - 이 네트워크 안의 모든 장치에게 전송할 때 사용

## 2. DHCP
    Dynamic Host Configuration Protocol
    자동으로 IP 주소를 할당해주는 프로토콜
- 기존 IPv4의 네트워크 설정을 사람이 수동으로 하는 문제점 해결 -> 자동 매핑
- 장치가 네트워크에 연결될 때 자동으로 IP 주소 등 설정값 부여
- 대규모 네트워크 환경에서 장치 효율적 관리 가능

## 3. IPv6 (차세대 IP)
    64비트를 16비트 단위로 점을 찍어 표기한다. 
    - 무한대에 가까운 주소 공간을 제공함
    - 거의 모든 장치에 고유 주소를 부여할 수 있음

## 4. NAT
    패킷이 라우터를 지나갈 때 IP주소 정보를 바꾸는 기술
- 이 덕분에 내부 네트워크에 있는 수많은 장치가 하나의 공인 IP를 공유해서 인터넷을 사용할 수 있게 된다. 
    - IPv4는 수많은 장치가 각각 공인 IP을 갖기 때문에 주소 고갈 문제 발생
- 이로 IPv4의 주소 고갈 문제 해결 가능, 내부망 보안 강화
- IP을 공인IP와 사설IP로 나눠서 처리
- 사설IP와 공인IP을 변환하여 인터넷이 가능하도록 하는 기술 
- 출발지 포트를 NAT가 랜덤으로 임의 변경하기 때문에 외부에서 접근하더라도 다음 장치로 라우팅이 불가능하다. 
- 따라서 NAT가 내부적으로 임의 변경한 포트 주소를 관리하고, 응답받은 데이터를 정확히 넘겨주기 위해 NAT 변환 테이블을 두어 관리한다. (캐시처럼, 임시 메모리 구조)
- 하지만 여러명이 동시에 인터넷에 접속하게 되므로 실제로 접속하는 호스트 숫자에 따라 접속 속도가 느려질 수 있다. 
#### NAT 동작 흐름 요약 (예: 내부 → 외부 접속 시)

1. 내부 장치(ex: 스마트폰)가 인터넷으로 요청

	•	예: 192.168.0.10:12345 → 93.184.216.34:80
 2. 라우터가 NAT 수행
	•	내부 IP 192.168.0.10 → 공인 IP 203.0.113.5로 IP 주소 변경

	•	포트도 변환: 12345 → 50001 (랜덤 포트 지정 -> 장치 구분 + 보안 강화)

	•	NAT 테이블에 매핑 정보 저장
3. 변경된 패킷이 인터넷에 도달

	•	외부에서 보는 패킷: 203.0.113.5:50001 → 93.184.216.34:80

4. 응답이 돌아옴

	•	외부 서버가 응답: 93.184.216.34 → 203.0.113.5:50001

5. 라우터가 NAT 테이블 참조

	•	포트 50001을 보고 “이건 192.168.0.10:12345 거구나!” 판단
 6. 내부 장치로 응답 전달

	•	최종 패킷: 93.184.216.34 → 192.168.0.10:12345